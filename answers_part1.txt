// Answers to Compiler Assignment Part 1

// Question A: What changed in hello.i compared to hello.c?
// (At least 3 observations)

// Observation 1: Header files have been expanded
// hello.c contains "#include <stdio.h>" which is a single line directive.
// hello.i contains the entire contents of stdio.h and all its dependencies
// (stdc-predef.h, libc-header-start.h, features.h, sys/cdefs.h, stddef.h, stdarg.h, etc.)
// The hello.i file is 820 lines total, mostly from the expanded headers.

// Observation 2: Macro definitions have been expanded
// hello.c defines "#define MESSAGE "Hello from CS327"" as a macro.
// In hello.i, this macro definition is removed and the macro usage is replaced
// with the actual string. The preprocessor has replaced MESSAGE with its definition.

// Observation 3: Preprocessor directives and line markers are added
// hello.i contains numerous "#" lines that indicate line number and file source information.
// These are preprocessor markers (e.g., "# 1 "hello.c"", "# 1 "/usr/include/stdio.h" 1 3 4")
// These help the compiler track which parts of the code came from which files.

// Observation 4: C code structure remains unchanged
// The actual C code (function definitions, variable declarations, etc.) remains
// syntactically identical, but with all includes fully expanded and macros substituted.


// Question B: How many lines are in hello.s? What do the first 10 lines do?

// hello.s contains 45 lines of assembly code.

// The first 10 lines of hello.s:
// Line 1:  .file "hello.c"           - Declares the source file name for debugging
// Line 2:  .text                     - Begins the text (code) section
// Line 3:  .section .rodata          - Begins the read-only data section
// Line 4:  .LC0:                     - Label for a literal constant
// Line 5:  .string "Hello from CS327" - Defines a string literal in read-only data
// Line 6:  .text                     - Switches back to the text (code) section
// Line 7:  .globl main               - Declares main as a global symbol (externally visible)
// Line 8:  .type main, @function     - Declares main as a function type
// Line 9:  main:                     - Label marking the start of the main function
// Line 10: .LFB0:                    - Function begin marker for debugging/unwinding


// Question C: What is the size difference between hello.o and the final executable hello?

// hello.o (object file) size: 1.5K (1536 bytes)
// hello (executable file) size: 16K (16384 bytes)
// Size difference: 16K - 1.5K = 14.5K (14848 bytes)

// Explanation:
// The executable hello is significantly larger than the object file hello.o because:
// 1. The linker adds runtime support libraries (libc, startup code)
// 2. Program headers and section headers are added for dynamic linking
// 3. ELF (Executable and Linkable Format) header information is included
// 4. Symbol table and relocation information for dynamic linking are included
// 5. The standard C runtime initialization and shutdown code are linked in
// The object file only contains the compiled code and data for main.c,
// while the executable contains everything needed to run the program.
